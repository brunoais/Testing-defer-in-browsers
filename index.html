<!doctype html>
<html>
<head>
	<title>sometitle</title>
	<!--<script src="http://area51.phpbb.com/phpBB/assets/javascript/jquery.js" defer></script>-->
	<script type="text/javascript" src="deferAsync.php" defer></script>
	<script type="text/javascript" src="deferAsync2.php"></script>
	<script type="text/javascript" src="deferAsync3.php" defer></script>
</head>
<body>
	<div id="suite_log"></div>

	<script type="text/javascript" src="deferAsync4.php" defer></script>
	<script type="text/javascript" src="deferAsync5.php"></script>
	<script type="text/javascript">var inlineData = true;</script>
	<script type="text/javascript" src="deferAsync6.php" defer></script>
	<script type="text/javascript" src="deferAsync7.php"></script>
	<script type="text/javascript">
		var testsRun = 0,
			testsPassed = 0;

		function log(html) {
			var el = document.getElementById('suite_log');
			el.innerHTML += html + '<br />';
		}

		function assert(condition, message) {
			message = message || '';

			if (condition) {
				log('[OK] Test #' + (testsRun + 1) + ': ' + message);
				testsPassed++;
			} else {
				log('[FAIL] Test #' + (testsRun + 1) + ': ' + message);
			}

			testsRun++;
		}

		function assertEquals(expected, actual, message) {
			message = message || '';
			assert(expected === actual, expected.toString() + ' === ' + actual.toString() + ' ' + message);
		}

		function assertArrayEquals(expected, actual, message) {
			message = message || '';
			assertEquals(expected.sort().toString(), actual.sort().toString());
		}

		function assertNotEquals(notExpected, actual, message) {
			message = message || '';
			assert(notExpected !== actual, notExpected.toString() + ' !== ' + actual.toString() + ' ' + message);
		}

		function assertArrayNotEquals(expected, actual, message) {
			message = message || '';
			assertNotEquals(expected.sort().toString(), actual.sort().toString());
		}

		function assertTrue(value, message) {
			message = message || '';
			assertEquals(true, value, message);
		}

		function assertFalse(value, message) {
			message = message || '';
			assertEquals(false, value, message);
		}

		function testSuite() {
			assertEquals('object', typeof array);
			assertNotEquals('undefined', typeof inlineData);
			assertFalse(inlineData2);
			assertFalse(inlineData5);
			assertTrue(inlineData1);
			assertTrue(inlineData3);
			assertTrue(inlineData4);
			assertTrue(inlineData6);
			assertTrue(inlineData7);
			assertArrayEquals([3, 4, 6], array);
			assertArrayEquals([5, 7, 1, 3, 4, 6], arrayy);

			var color = (testsPassed === testsRun) ? 'green' : 'red';
			log('<span style="color: ' + color + ';">[' + testsPassed + '/' + testsRun + '] Tests passed</span>');
		}

		if (addEventListener) {
			addEventListener('load', testSuite, false);
		} else {
			attachEvent('onload', testSuite);
		}
	</script>
</body>
</html>